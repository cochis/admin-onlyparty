<app-header titulo="Comercios"></app-header>

<ion-content class="ion-padding">
  <ion-searchbar [debounce]="500" (ionInput)="handleInput($event)"></ion-searchbar>
  <ion-fab horizontal="end" vertical="bottom">
    <ion-fab-button>
      <ion-icon name="add" routerLink="/core/comercios/crear-comercio"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <div class="mat-elevation-z8 displayBlock ion-padding" tabindex="0" style="margin-top: 60px;">
    <table mat-table [dataSource]="dataSource" matSort>
      <ng-container matColumnDef="img">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Imagen</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;">


          <ion-avatar slot="start">
            <img [alt]="row.email" src="{{url}}/upload/comercios/{{ row.img[0] }}" class="avatar" />
          </ion-avatar>



        </td>
      </ng-container>
      <ng-container matColumnDef="usuario">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Usuario</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.usuario.email }}</td>
      </ng-container>
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Nombre</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.nombre }}</td>
      </ng-container>
      <ng-container matColumnDef="direccion">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Dirección</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.direccion }}</td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Correo electrónico</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.email }}</td>
      </ng-container>
      <ng-container matColumnDef="redes">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Redes sociales</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.redes.length }}</td>
      </ng-container>
      <ng-container matColumnDef="servicios">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Servicios</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.servicios.length }}</td>
      </ng-container>
      <ng-container matColumnDef="productos">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Productos</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.productos.length }}</td>
      </ng-container>
      <ng-container matColumnDef="paquetes">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Paquetes</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.paquetes.length }}</td>
      </ng-container>
      <ng-container matColumnDef="imagenes">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Imagenes</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.imagenes.length }}</td>
      </ng-container>
      <ng-container matColumnDef="telefonos">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Teléfonos</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.telefonos.length }}</td>
      </ng-container>
      <ng-container matColumnDef="whatsapp">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Whatsapp</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;"> {{ row.whatsapp }}</td>
      </ng-container>
      <ng-container matColumnDef="horarioAtencion">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Horario de atención</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.horarioAtencion }}</td>
      </ng-container>
      <ng-container matColumnDef="dateCreated">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Fecha de creación</th>
        <td mat-cell *matCellDef="let row" style="font-size: 10px;" class="upper"> {{ row.dateCreated | date}}</td>
      </ng-container>


      <ng-container matColumnDef="opciones">
        <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">Opciones</th>
        <td mat-cell *matCellDef="let row">
          <ion-icon slot="start" name="pencil" style="margin: 1px;" color="success"
            (click)="editComercio(row)"></ion-icon>
          <ion-icon name="eye" style="margin: 1px;" color="secondary" (click)="viewComercio(row)"></ion-icon>
          <ion-icon slot="end" name="checkmark" style="margin: 1px;" color="success" (click)="isActive(row)"
            *ngIf="!row.activated"></ion-icon>
          <ion-icon slot="end" name="trash" style="margin: 1px;" color="danger" (click)="isActive(row)"
            *ngIf="row.activated"></ion-icon>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr class="mat-row" *matNoDataRow>

        <td class="mat-cell" colspan="4">No se encontraron datos"</td>
      </tr>
    </table>

  </div>

  <mat-paginator [pageSizeOptions]="[100,200,500]" aria-label="Select page of data"></mat-paginator>

</ion-content>